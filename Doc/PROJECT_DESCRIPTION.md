# APEC / ARES Platform — описание проекта

Веб-платформа для организации и проведения спортивных соревнований: учёт участников, команд, тренеров и судей, турнирные сетки, заявки, новости, документы и трансляции. Подходит для федераций, региональных федераций и спортивных организаций.

---

## Назначение

Система позволяет:

- вести единую базу пользователей (администраторы, модераторы, судьи, тренеры, спортсмены) и команд;
- создавать соревнования (личные и командные), управлять заявками и участниками;
- строить и вести турнирные сетки, вносить и подтверждать результаты;
- публиковать новости, документы и ссылки на прямые трансляции;
- настраивать визуальное представление организации (название, логотип, описание) для публичной страницы;
- вести системные логи действий, создавать резервные копии и формировать отчёты.

Гости видят публичный сайт без входа; авторизованные пользователи получают доступ к панелям в зависимости от роли. Модераторам доступ ограничивается набором разрешённых разделов, задаваемым администратором.

---

## Роли пользователей

- **Неавторизованный (гость)** — просмотр новостей, соревнований, календаря, документов, трансляций; регистрация команды; обратная связь; вход и регистрация.
- **Администратор** — полный доступ: пользователи, команды, приглашения, соревнования, сетки, календарь, новости, трансляции, документы, справочники, настройки организации, бэкапы, логи, статистика, уведомления, обращения, модерация команд, отчёты.
- **Модератор** — доступ только к тем разделам, которые администратор включил в список разрешённых вкладок (те же функции, что у администратора, но с ограниченным набором разделов).
- **Судья** — турнирные сетки, подтверждение результатов, режим киоска для экрана на соревнованиях, статистика соревнований, календарь, уведомления, обращения.
- **Тренер** — управление своей командой и спортсменами, заявки на соревнования, календарь выступлений, турнирные сетки, статистика команды и соревнований, уведомления команде.
- **Спортсмен** — личное портфолио, статистика, история соревнований, турнирные сетки, календарь, новости.

Регистрация тренеров возможна только по приглашению администратора; спортсмены при регистрации привязываются к тренеру с последующим одобрением заявки тренером.

---

## Технологический стек

**Backend**  
Серверная часть на Node.js (Express): REST API, аутентификация по JWT, загрузка файлов, WebSocket (Socket.IO) для обновлений в реальном времени (например, турнирные сетки и уведомления). База данных — PostgreSQL; работа с БД через ORM Prisma (миграции, модели, типы). Логирование — Winston с ротацией файлов и санитизацией чувствительных данных; отдельно ведётся таблица системных логов действий в БД. Резервное копирование — по расписанию и вручную (JSON/CSV). Язык — TypeScript.

**Frontend**  
Одностраничное приложение на React (TypeScript): маршрутизация (React Router), состояние (Redux Toolkit, Zustand), UI-компоненты (Ant Design), стили (Tailwind CSS), сборка и dev-сервер (Vite). Запросы к API через HTTP-клиент с подстановкой JWT; для реального времени используется клиент Socket.IO. Графики (Chart.js), экспорт в PDF/Excel (jsPDF, xlsx), визуализация сеток (ReactFlow), 3D-визуализация (Three.js, React Three Fiber) — где задействованы в интерфейсе. Адаптивная вёрстка и отдельный гостевой интерфейс без бокового меню.

**Инфраструктура и инструменты**  
Проект организован как npm-workspace (корень, backend, frontend). База — PostgreSQL. Развёртывание и первичная настройка на Windows выполняются скриптом PowerShell (проверка Node.js и PostgreSQL, создание БД, установка зависимостей, генерация Prisma-клиента, настройка .env через интерактивный мастер, миграции, загрузка справочников, создание учётной записи администратора). Конфигурация — через переменные окружения (два .env: backend и frontend).

---

## Безопасность

Реализованы: аутентификация по JWT и проверка ролей на API; хранение паролей в виде bcrypt-хешей; валидация паролей при регистрации; ограничение частоты запросов (общее, на вход, на загрузки); HTTP-заголовки безопасности (Helmet); CORS; санитизация HTML-ввода; проверка загружаемых файлов по MIME и magic bytes; защита от path traversal при сохранении файлов; маскирование персональных данных в логах. Подробнее — в документации по защите и логированию.

---

## Документация в репозитории

- **THIRD_PARTY_LICENSES.txt** — перечень используемых технологий и библиотек с указанием лицензий (на английском).
- **CONFIGURATION.md** — инструкция по ручной настройке переменных окружения (backend и frontend .env).
- **FUNCTIONALITY.md** — описание функционала по ролям и вкладкам интерфейса.
- **SECURITY_AND_LOGGING.md** — механизмы защиты и логирования.
- **DEPLOYMENT.md** — пошаговое развёртывание с помощью скрипта manage.ps1.

Лицензия на само ПО приведена в файле license.txt в репозитории.

---

## Автор

Бакулин Никита Сергеевич.  
APEC © 2026. Все права защищены.
